{
  "version": 3,
  "sources": ["src/app/core/services/localization.service.ts"],
  "sourcesContent": ["import { isPlatformBrowser } from '@angular/common';\r\nimport { Inject, Injectable, PLATFORM_ID } from '@angular/core';\r\nimport { Title } from '@angular/platform-browser';\r\nimport { ActivatedRoute, NavigationEnd, Router } from '@angular/router';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { BehaviorSubject, filter } from 'rxjs';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class LocalizationService {\r\n  private selectedLanguage$ = new BehaviorSubject<string>('ar');\r\n  private isArabic$ = new BehaviorSubject<boolean>(false);\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private route: ActivatedRoute,\r\n    private translate: TranslateService,\r\n    private title: Title,\r\n\r\n    @Inject(PLATFORM_ID) private platformId: Object\r\n  ) {\r\n    this.router.events\r\n      .pipe(filter((event) => event instanceof NavigationEnd))\r\n      .subscribe(() => {\r\n        const routeLang =\r\n          this.route.snapshot.firstChild?.paramMap.get('lang') || 'ar';\r\n\r\n        this.selectedLanguage$.next(routeLang);\r\n        this.isArabic$.next(routeLang === 'ar');\r\n\r\n        // âœ… Check if it's in browser before using `document`\r\n        if (isPlatformBrowser(this.platformId)) {\r\n          document.documentElement.lang = routeLang;\r\n          document.documentElement.dir = routeLang === 'ar' ? 'rtl' : 'ltr';\r\n        }\r\n\r\n        this.translate.use(routeLang);\r\n\r\n        // âœ… Set dynamic title Routes  using data.titleKey\r\n        let currentRoute = this.route.root;\r\n        while (currentRoute.firstChild) {\r\n          currentRoute = currentRoute.firstChild;\r\n        }\r\n\r\n        const titleKey = currentRoute.snapshot.data['titleKey'];\r\n        if (titleKey) {\r\n          this.translate.get(titleKey).subscribe((translatedTitle) => {\r\n            const finalTitle = translatedTitle.toUpperCase(); // ðŸ” uppercase logic\r\n            this.title.setTitle(finalTitle);\r\n          });\r\n        }\r\n      });\r\n  }\r\n\r\n  getLanguage() {\r\n    return this.selectedLanguage$.asObservable();\r\n  }\r\n\r\n  getCurrentLanguage() {\r\n    return this.selectedLanguage$.value;\r\n  }\r\n\r\n  getIsArabic() {\r\n    return this.isArabic$.asObservable();\r\n  }\r\n\r\n  getCurrentIsArabic() {\r\n    return this.isArabic$.value;\r\n  }\r\n\r\n  changeLanguage(lang: string, currentUrl: string) {\r\n\r\n    // Remove query parameters if they exist\r\n    const cleanUrl = currentUrl.includes('?')\r\n      ? currentUrl.split('?')[0]\r\n      : currentUrl;\r\n\r\n    // Split the URL and replace the language code\r\n    const segments = cleanUrl.split('/');\r\n    if (segments.length > 1) {\r\n      segments[1] = lang;\r\n    }\r\n\r\n    // Navigate to the new language URL without query parameters\r\n    this.router.navigate([segments.join('/')]);\r\n\r\n    this.translate.use(lang);\r\n  }\r\n}\r\n"],
  "mappings": "oPAUA,IAAaA,GAAmB,IAAA,CAA1B,MAAOA,CAAmB,CAKpBC,OACAC,MACAC,UACAC,MAEqBC,WATvBC,kBAAoB,IAAIC,EAAwB,IAAI,EACpDC,UAAY,IAAID,EAAyB,EAAK,EAEtDE,YACUR,EACAC,EACAC,EACAC,EAEqBC,EAAkB,CALvC,KAAAJ,OAAAA,EACA,KAAAC,MAAAA,EACA,KAAAC,UAAAA,EACA,KAAAC,MAAAA,EAEqB,KAAAC,WAAAA,EAE7B,KAAKJ,OAAOS,OACTC,KAAKC,EAAQC,GAAUA,aAAiBC,CAAa,CAAC,EACtDC,UAAU,IAAK,CACd,IAAMC,EACJ,KAAKd,MAAMe,SAASC,YAAYC,SAASC,IAAI,MAAM,GAAK,KAE1D,KAAKd,kBAAkBe,KAAKL,CAAS,EACrC,KAAKR,UAAUa,KAAKL,IAAc,IAAI,EAGlCM,EAAkB,KAAKjB,UAAU,IACnCkB,SAASC,gBAAgBC,KAAOT,EAChCO,SAASC,gBAAgBE,IAAMV,IAAc,KAAO,MAAQ,OAG9D,KAAKb,UAAUwB,IAAIX,CAAS,EAG5B,IAAIY,EAAe,KAAK1B,MAAM2B,KAC9B,KAAOD,EAAaV,YAClBU,EAAeA,EAAaV,WAG9B,IAAMY,EAAWF,EAAaX,SAASc,KAAK,SACxCD,GACF,KAAK3B,UAAUiB,IAAIU,CAAQ,EAAEf,UAAWiB,GAAmB,CACzD,IAAMC,EAAaD,EAAgBE,YAAW,EAC9C,KAAK9B,MAAM+B,SAASF,CAAU,CAChC,CAAC,CAEL,CAAC,CACL,CAEAG,aAAW,CACT,OAAO,KAAK9B,kBAAkB+B,aAAY,CAC5C,CAEAC,oBAAkB,CAChB,OAAO,KAAKhC,kBAAkBiC,KAChC,CAEAC,aAAW,CACT,OAAO,KAAKhC,UAAU6B,aAAY,CACpC,CAEAI,oBAAkB,CAChB,OAAO,KAAKjC,UAAU+B,KACxB,CAEAG,eAAejB,EAAckB,EAAkB,CAQ7C,IAAMC,GALWD,EAAWE,SAAS,GAAG,EACpCF,EAAWG,MAAM,GAAG,EAAE,CAAC,EACvBH,GAGsBG,MAAM,GAAG,EAC/BF,EAASG,OAAS,IACpBH,EAAS,CAAC,EAAInB,GAIhB,KAAKxB,OAAO+C,SAAS,CAACJ,EAASK,KAAK,GAAG,CAAC,CAAC,EAEzC,KAAK9C,UAAUwB,IAAIF,CAAI,CACzB,4CA9EWzB,GAAmBkD,EAAAC,CAAA,EAAAD,EAAAE,CAAA,EAAAF,EAAAG,CAAA,EAAAH,EAAAI,CAAA,EAAAJ,EAUpBK,CAAW,CAAA,CAAA,6BAVVvD,EAAmBwD,QAAnBxD,EAAmByD,UAAAC,WAFlB,MAAM,CAAA,SAEP1D,CAAmB,GAAA",
  "names": ["LocalizationService", "router", "route", "translate", "title", "platformId", "selectedLanguage$", "BehaviorSubject", "isArabic$", "constructor", "events", "pipe", "filter", "event", "NavigationEnd", "subscribe", "routeLang", "snapshot", "firstChild", "paramMap", "get", "next", "isPlatformBrowser", "document", "documentElement", "lang", "dir", "use", "currentRoute", "root", "titleKey", "data", "translatedTitle", "finalTitle", "toUpperCase", "setTitle", "getLanguage", "asObservable", "getCurrentLanguage", "value", "getIsArabic", "getCurrentIsArabic", "changeLanguage", "currentUrl", "segments", "includes", "split", "length", "navigate", "join", "\u0275\u0275inject", "Router", "ActivatedRoute", "TranslateService", "Title", "PLATFORM_ID", "factory", "\u0275fac", "providedIn"]
}
